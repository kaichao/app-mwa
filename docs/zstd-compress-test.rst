
* 24-channel fits zstd compress test

.. table::
  :align: center

+-------+-----------------------------------------+-----------------------------------------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
|       |                                         |                 --long                  |                --long=30                |                     --long -T4                    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| level | bytes     | ratio   | time    | bw      | bytes     | ratio   | time    | bw      | bytes     | ratio   | time    | bw      | bytes     | ratio   | time    | bw      | speedup |
+=======+===========+=========+=========+=========+===========+=========+=========+=========+===========+=========+=========+=========+===========+=========+=========+=========+=========+
| 1     | 758876154 | 81.817% | 4.65    | 190.19  | 754900053 | 81.389% | 5.80    | 152.48  | 754899976 | 81.389% | 6.61    | 133.74  | 754900053 | 81.389% | 1.89    | 468.02  | 3.07    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 2     | 758763813 | 81.805% | 5.44    | 162.48  | 754758090 | 81.373% | 6.96    | 127.18  | 754758098 | 81.373% | 7.10    | 124.52  | 754758090 | 81.373% | 1.88    | 470.26  | 3.70    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 3     | 759925099 | 81.930% | 9.02    | 98.09   | 755962263 | 81.503% | 10.72   | 82.49   | 755962266 | 81.503% | 11.05   | 80.04   | 755962263 | 81.503% | 2.85    | 310.26  | 3.76    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 4     | 760638056 | 82.007% | 11.26   | 78.54   | 756533450 | 81.565% | 12.72   | 69.56   | 756533461 | 81.565% | 13.00   | 68.06   | 756533450 | 81.565% | 3.44    | 257.21  | 3.70    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 5     | 761208514 | 82.069% | 27.33   | 32.37   | 756882616 | 81.602% | 27.95   | 31.65   | 756882625 | 81.602% | 27.80   | 31.82   | 756882616 | 81.602% | 7.19    | 122.99  | 3.89    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 6     | 761666815 | 82.118% | 40.48   | 21.85   | 757548431 | 81.674% | 40.77   | 21.70   | 757548435 | 81.674% | 39.12   | 22.61   | 757548431 | 81.674% | 11.98   | 73.82   | 3.40    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 7     | 761428823 | 82.093% | 46.18   | 19.15   | 757335689 | 81.651% | 45.50   | 19.44   | 757335695 | 81.651% | 45.27   | 19.54   | 757335689 | 81.651% | 21.37   | 41.39   | 2.13    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 8     | 759054554 | 81.837% | 47.47   | 18.63   | 755058489 | 81.406% | 48.60   | 18.20   | 755058492 | 81.406% | 47.91   | 18.46   | 755058489 | 81.406% | 17.71   | 49.94   | 2.74    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 9     | 759159651 | 81.848% | 58.18   | 15.20   | 755159072 | 81.417% | 60.55   | 14.61   | 755159080 | 81.417% | 58.53   | 15.11   | 755159072 | 81.417% | 21.88   | 40.43   | 2.77    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 10    | 759392921 | 81.873% | 95.64   | 9.25    | 755390156 | 81.442% | 93.59   | 9.45    | 755390189 | 81.442% | 93.46   | 9.46    | 755390156 | 81.442% | 31.53   | 28.06   | 2.97    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 11    | 759485327 | 81.883% | 99.39   | 8.90    | 755582622 | 81.462% | 122.64  | 7.21    | 755582660 | 81.462% | 116.20  | 7.61    | 755582622 | 81.462% | 34.21   | 25.85   | 3.58    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 12    | 759515428 | 81.886% | 106.15  | 8.33    | 755609657 | 81.465% | 129.49  | 6.83    | 755609688 | 81.465% | 123.26  | 7.18    | 755609657 | 81.465% | 39.25   | 22.54   | 3.30    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 13    | 759399842 | 81.874% | 172.16  | 5.14    | 755407827 | 81.443% | 175.87  | 5.03    | 755407857 | 81.443% | 178.59  | 4.95    | 755407827 | 81.443% | 50.44   | 17.54   | 3.49    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 14    | 759451183 | 81.879% | 175.74  | 5.03    | 755619585 | 81.466% | 191.85  | 4.61    | 755619612 | 81.466% | 187.99  | 4.71    | 755619585 | 81.466% | 51.64   | 17.13   | 3.72    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 15    | 759459744 | 81.880% | 205.45  | 4.31    | 755819854 | 81.488% | 231.23  | 3.83    | 755819910 | 81.488% | 233.90  | 3.78    | 755819854 | 81.488% | 64.46   | 13.72   | 3.59    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 16    | 758129004 | 81.737% | 194.50  | 4.55    | 754235889 | 81.317% | 212.37  | 4.17    | 754235890 | 81.317% | 215.91  | 4.10    | 754235889 | 81.317% | 60.61   | 14.59   | 3.50    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 17    | 754644657 | 81.361% | 246.02  | 3.60    | 754183566 | 81.311% | 268.41  | 3.30    | 754183718 | 81.311% | 291.29  | 3.04    | 754183566 | 81.311% | 75.58   | 11.70   | 3.55    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 18    | 754537532 | 81.350% | 282.46  | 3.13    | 754168879 | 81.310% | 313.77  | 2.82    | 754168913 | 81.310% | 331.03  | 2.67    | 754168879 | 81.310% | 88.84   | 9.96    | 3.53    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+
| 19    | 754167966 | 81.310% | 340.66  | 2.60    | 754167725 | 81.310% | 438.90  | 2.02    | 754167863 | 81.310% | 434.74  | 2.03    | 754167725 | 81.310% | 131.64  | 6.72    | 3.33    |
+-------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+-----------+---------+---------+---------+---------+

* file bytes : 927524160
* compress time : seconds
* bw, bandwidth : MB/s
* speedup : 1-thread running time / 4-thread running time

测试结果
  - 24-channel的fits文件zstd压缩比，与压缩等级level关系不明显
  - 长窗口（--long）压缩比稍高
  - 多线程可提升性能，但需占用更多内存，-T4 约需1GB内存，线程数可选2~4
  - level可选用1~5，长窗口压缩，最终选择压缩比最高的结果

